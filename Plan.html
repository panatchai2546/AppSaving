<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar and Expense Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px;
        }

        .calendar-container {
            margin-bottom: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .calendar-header select {
            padding: 5px;
            margin: 0 5px;
        }

        .calendar {
            border-collapse: collapse;
            width: 100%;
        }

        .calendar th, .calendar td {
            border: 1px solid #000;
            width: 40px;
            height: 40px;
            text-align: center;
        }

        .expense-tracker {
            width: 100%;
        }

        .expense-tracker table {
            width: 100%;
            border-collapse: collapse;
        }

        .expense-tracker th, .expense-tracker td {
            border: 1px solid #000;
            padding: 8px;
            text-align: center;
        }

        .expense-tracker input {
            padding: 5px;
            margin: 5px;
        }

        .expense-tracker button {
            padding: 5px 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calendar-container">
            <div class="calendar-header">
                <button id="prevMonth">❮</button>
                <div>
                    <select id="monthSelect"></select>
                    <select id="yearSelect"></select>
                </div>
                <button id="nextMonth">❯</button>
            </div>
            <table class="calendar">
                <thead>
                    <tr>
                        <th>อา</th>
                        <th>จ</th>
                        <th>อ</th>
                        <th>พ</th>
                        <th>พฤ</th>
                        <th>ศ</th>
                        <th>ส</th>
                    </tr>
                </thead>
                <tbody id="calendarBody"></tbody>
            </table>
        </div>
        <div class="expense-tracker">
            <table>
                <thead>
                    <tr>
                        <th>รายการ</th>
                        <th>รายรับ</th>
                        <th>รายจ่าย</th>
                        <th>คงเหลือ</th>
                    </tr>
                </thead>
                <tbody id="expenseBody"></tbody>
            </table>
            <div>
                <input type="text" id="item" placeholder="รายการ">
                <input type="number" id="income" placeholder="รายรับ">
                <input type="number" id="expense" placeholder="รายจ่าย">
                <button onclick="addItem()">เพิ่ม</button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const monthSelect = document.getElementById('monthSelect');
            const yearSelect = document.getElementById('yearSelect');
            const calendarBody = document.getElementById('calendarBody');
            const expenseBody = document.getElementById('expenseBody');

            const months = ["มกราคม", "กุมภาพันธ์", "มีนาคม", "เมษายน", "พฤษภาคม", "มิถุนายน", "กรกฎาคม", "สิงหาคม", "กันยายน", "ตุลาคม", "พฤศจิกายน", "ธันวาคม"];
            const currentYear = new Date().getFullYear();
            const currentMonth = new Date().getMonth();

            months.forEach((month, index) => {
                let option = document.createElement('option');
                option.value = index;
                option.textContent = month;
                monthSelect.appendChild(option);
            });

            for (let i = currentYear - 10; i <= currentYear + 10; i++) {
                let option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                yearSelect.appendChild(option);
            }

            monthSelect.value = currentMonth;
            yearSelect.value = currentYear;

            function generateCalendar(month, year) {
                calendarBody.innerHTML = '';
                const firstDay = new Date(year, month).getDay();
                const daysInMonth = 32 - new Date(year, month, 32).getDate();

                let row = document.createElement('tr');
                for (let i = 0; i < firstDay; i++) {
                    let cell = document.createElement('td');
                    row.appendChild(cell);
                }

                for (let i = 1; i <= daysInMonth; i++) {
                    if ((i + firstDay - 1) % 7 === 0) {
                        calendarBody.appendChild(row);
                        row = document.createElement('tr');
                    }
                    let cell = document.createElement('td');
                    cell.textContent = i;
                    row.appendChild(cell);
                }
                calendarBody.appendChild(row);
            }

            monthSelect.addEventListener('change', () => {
                generateCalendar(monthSelect.value, yearSelect.value);
            });

            yearSelect.addEventListener('change', () => {
                generateCalendar(monthSelect.value, yearSelect.value);
            });

            document.getElementById('prevMonth').addEventListener('click', () => {
                let month = monthSelect.value;
                let year = yearSelect.value;
                if (month == 0) {
                    month = 11;
                    year--;
                } else {
                    month--;
                }
                monthSelect.value = month;
                yearSelect.value = year;
                generateCalendar(month, year);
            });

            document.getElementById('nextMonth').addEventListener('click', () => {
                let month = monthSelect.value;
                let year = yearSelect.value;
                if (month == 11) {
                    month = 0;
                    year++;
                } else {
                    month++;
                }
                monthSelect.value = month;
                yearSelect.value = year;
                generateCalendar(month, year);
            });

            function addItem() {
                const item = document.getElementById('item').value;
                const income = document.getElementById('income').value;
                const expense = document.getElementById('expense').value;
                const balance = parseInt(income) - parseInt(expense);

                if (item && (income || expense)) {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>${item}</td><td>${income || 0}</td><td>${expense || 0}</td><td>${balance}</td>`;
                    expenseBody.appendChild(row);
                    document.getElementById('item').value = '';
                    document.getElementById('income').value = '';
                    document.getElementById('expense').value = '';
                }
            }

            generateCalendar(currentMonth, currentYear);
        });
    </script>
</body>
</html>
